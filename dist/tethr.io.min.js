!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports=a("./lib/tethr")},{"./lib/tethr":2}],2:[function(a,b,c){function d(){this._peers={}}function e(a,b){this._tether=a,this._chan=b,this.id=b._id,this._listen()}var f=a("../node_modules/webrtc.io-client/lib/webrtc.io.js"),g=a("events"),h=a("util");c.connect=new d,d.prototype.connect=function(a,b){b=b||{};var c=b.host||window.document.location.host,d=b.ice||{iceServers:[{url:"stun:stun.l.google.com:19302"}]},e=b.secure?"wss":"ws";this._listen(),f.SERVER=function(){return d},f.connect(e+"://"+c,a)},h.inherits(d,g.EventEmitter),d.prototype._listen=function(){var a=this;f.on("connect",function(){a.emit("connect")}),f.on("connections",function(){f.fire("ready")}),f.on("data stream open",function(b){var c=a._peers[b._id]=new e(a,b);a.emit("join",c)})},d.prototype.id=function(){return f._me},d.prototype.peer=function(a){return this._peers[a]},d.prototype.eachPeer=function(a){var b=this;Object.keys(b._peers).forEach(function(c){a(b._peers[c],c)})},d.prototype.broadcast=function(a){var b=this;b.eachPeer(function(b){b.send(a)})},h.inherits(e,g.EventEmitter),e.prototype._listen=function(){var a=this,b=this._tether;a._chan.onclose=function(){a.emit("leave"),b.emit("leave",a),f.fire("remove_peer_connected",{socketId:a.id})},a._chan.onerror=function(a){b.emit("error",a)},a._chan.onmessage=function(c){var d;try{d=JSON.parse(c.data)}catch(e){return b.emit("error",new Error("JSON could not parse: "+c.data)),void 0}var f=d.from,g=d.msg;a.emit("message",g,b.peer(f))}},e.prototype.send=function(a){var b=this,c={from:b._tether.id(),msg:a};b._chan.send(JSON.stringify(c))}},{"../node_modules/webrtc.io-client/lib/webrtc.io.js":8,events:3,util:7}],3:[function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}b.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length))throw b=arguments[1],b instanceof Error?b:TypeError('Uncaught, unspecified "error" event.');if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];c.apply(this,h)}else if(f(c)){for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];for(j=c.slice(),e=j.length,i=0;e>i;i++)j[i].apply(this,h)}return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned){var e;e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),console.trace())}return this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?d(a._events[b])?1:a._events[b].length:0}},{}],4:[function(a,b){var c=b.exports={};c.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),c.title="browser",c.browser=!0,c.env={},c.argv=[],c.binding=function(){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(){throw new Error("process.chdir is not supported")}},{}],5:[function(a,b){b.exports="function"==typeof Object.create?function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],6:[function(a,b){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],7:[function(a,b,c){function d(a,b){var d={seen:[],stylize:f};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),o(b)?d.showHidden=b:b&&c._extend(d,b),u(d.showHidden)&&(d.showHidden=!1),u(d.depth)&&(d.depth=2),u(d.colors)&&(d.colors=!1),u(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=e),h(d,a,d.depth)}function e(a,b){var c=d.styles[b];return c?"["+d.colors[c][0]+"m"+a+"["+d.colors[c][1]+"m":a}function f(a){return a}function g(a){var b={};return a.forEach(function(a){b[a]=!0}),b}function h(a,b,d){if(a.customInspect&&b&&z(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return s(e)||(e=h(a,e,d)),e}var f=i(a,b);if(f)return f;var o=Object.keys(b),p=g(o);if(a.showHidden&&(o=Object.getOwnPropertyNames(b)),y(b)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return j(b);if(0===o.length){if(z(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(v(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(x(b))return a.stylize(Date.prototype.toString.call(b),"date");if(y(b))return j(b)}var r="",t=!1,u=["{","}"];if(n(b)&&(t=!0,u=["[","]"]),z(b)){var w=b.name?": "+b.name:"";r=" [Function"+w+"]"}if(v(b)&&(r=" "+RegExp.prototype.toString.call(b)),x(b)&&(r=" "+Date.prototype.toUTCString.call(b)),y(b)&&(r=" "+j(b)),0===o.length&&(!t||0==b.length))return u[0]+r+u[1];if(0>d)return v(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var A;return A=t?k(a,b,d,p,o):o.map(function(c){return l(a,b,d,p,c,t)}),a.seen.pop(),m(A,r,u)}function i(a,b){if(u(b))return a.stylize("undefined","undefined");if(s(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return r(b)?a.stylize(""+b,"number"):o(b)?a.stylize(""+b,"boolean"):p(b)?a.stylize("null","null"):void 0}function j(a){return"["+Error.prototype.toString.call(a)+"]"}function k(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)E(b,String(g))?f.push(l(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(l(a,b,c,d,e,!0))}),f}function l(a,b,c,d,e,f){var g,i,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?i=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(i=a.stylize("[Setter]","special")),E(d,e)||(g="["+e+"]"),i||(a.seen.indexOf(j.value)<0?(i=p(c)?h(a,j.value,null):h(a,j.value,c-1),i.indexOf("\n")>-1&&(i=f?i.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+i.split("\n").map(function(a){return"   "+a}).join("\n"))):i=a.stylize("[Circular]","special")),u(g)){if(f&&e.match(/^\d+$/))return i;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+i}function m(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function n(a){return Array.isArray(a)}function o(a){return"boolean"==typeof a}function p(a){return null===a}function q(a){return null==a}function r(a){return"number"==typeof a}function s(a){return"string"==typeof a}function t(a){return"symbol"==typeof a}function u(a){return void 0===a}function v(a){return w(a)&&"[object RegExp]"===B(a)}function w(a){return"object"==typeof a&&null!==a}function x(a){return w(a)&&"[object Date]"===B(a)}function y(a){return w(a)&&("[object Error]"===B(a)||a instanceof Error)}function z(a){return"function"==typeof a}function A(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function B(a){return Object.prototype.toString.call(a)}function C(a){return 10>a?"0"+a.toString(10):a.toString(10)}function D(){var a=new Date,b=[C(a.getHours()),C(a.getMinutes()),C(a.getSeconds())].join(":");return[a.getDate(),K[a.getMonth()],b].join(" ")}function E(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var F=a("__browserify_process"),G="undefined"!=typeof self?self:"undefined"!=typeof window?window:{},H=/%[sdj%]/g;c.format=function(a){if(!s(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(d(arguments[c]));return b.join(" ")}for(var c=1,e=arguments,f=e.length,g=String(a).replace(H,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(e[c++]);case"%d":return Number(e[c++]);case"%j":try{return JSON.stringify(e[c++])}catch(b){return"[Circular]"}default:return a}}),h=e[c];f>c;h=e[++c])g+=p(h)||!w(h)?" "+h:" "+d(h);return g},c.deprecate=function(a,b){function d(){if(!e){if(F.throwDeprecation)throw new Error(b);F.traceDeprecation?console.trace(b):console.error(b),e=!0}return a.apply(this,arguments)}if(u(G.process))return function(){return c.deprecate(a,b).apply(this,arguments)};if(F.noDeprecation===!0)return a;var e=!1;return d};var I,J={};c.debuglog=function(a){if(u(I)&&(I=F.env.NODE_DEBUG||""),a=a.toUpperCase(),!J[a])if(new RegExp("\\b"+a+"\\b","i").test(I)){var b=F.pid;J[a]=function(){var d=c.format.apply(c,arguments);console.error("%s %d: %s",a,b,d)}}else J[a]=function(){};return J[a]},c.inspect=d,d.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},d.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=n,c.isBoolean=o,c.isNull=p,c.isNullOrUndefined=q,c.isNumber=r,c.isString=s,c.isSymbol=t,c.isUndefined=u,c.isRegExp=v,c.isObject=w,c.isDate=x,c.isError=y,c.isFunction=z,c.isPrimitive=A,c.isBuffer=a("./support/isBuffer");var K=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",D(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!w(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}},{"./support/isBuffer":6,__browserify_process:4,inherits:5}],8:[function(a,b){function c(a){for(var b=a.split("\r\n"),c=null,g=0;g<b.length;g++)if(-1!==b[g].search("m=audio")){c=g;break}if(null===c)return a;for(var h=0;h<b.length;h++)if(-1!==b[h].search("opus/48000")){var i=d(b[h],/:(\d+) opus\/48000/i);i&&(b[c]=e(b[c],i));break}return b=f(b,c),a=b.join("\r\n")}function d(a,b){var c=a.match(b);return c&&2==c.length?c[1]:null}function e(a,b){for(var c=a.split(" "),d=[],e=0,f=0;f<c.length;f++)3===e&&(d[e++]=b),c[f]!==b&&(d[e++]=c[f]);return d.join(" ")}function f(a,b){for(var c=a[b].split(" "),e=a.length-1;e>=0;e--){var f=d(a[e],/a=rtpmap:(\d+) CN\/\d+/i);if(f){var g=c.indexOf(f);-1!==g&&c.splice(g,1),a.splice(e,1)}}return a[b]=c.join(" "),a}function g(a,b){var c=a;for(var d in b.mandatory)c.mandatory[d]=b.mandatory[d];return c.optional.concat(b.optional),c}var h=window.PeerConnection||window.webkitPeerConnection00||window.webkitRTCPeerConnection||window.mozRTCPeerConnection,i=(window.URL||window.webkitURL||window.msURL||window.oURL,navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia),j=window.mozRTCIceCandidate||window.RTCIceCandidate,k=window.mozRTCSessionDescription||window.RTCSessionDescription,l={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};navigator.webkitGetUserMedia&&(webkitMediaStream.prototype.getVideoTracks||(webkitMediaStream.prototype.getVideoTracks=function(){return this.videoTracks},webkitMediaStream.prototype.getAudioTracks=function(){return this.audioTracks}),webkitRTCPeerConnection.prototype.getLocalStreams||(webkitRTCPeerConnection.prototype.getLocalStreams=function(){return this.localStreams},webkitRTCPeerConnection.prototype.getRemoteStreams=function(){return this.remoteStreams})),function(){var a;a="undefined"==typeof b?this.rtc={}:b.exports={},a.debug=!1,a._socket=null,a._me=null,a._events={},a.on=function(b,c){a._events[b]=a._events[b]||[],a._events[b].push(c)},a.fire=function(b){var c=a._events[b],d=Array.prototype.slice.call(arguments,1);if(c)for(var e=0,f=c.length;f>e;e++)c[e].apply(null,d)},a.SERVER=function(){return navigator.mozGetUserMedia?{iceServers:[{url:"stun:23.21.150.121"}]}:{iceServers:[{url:"stun:stun.l.google.com:19302"}]}},a.peerConnections={},a.connections=[],a.streams=[],a.numStreams=0,a.initializedStreams=0,a.dataChannels={},a.dataChannelConfig={optional:[{RtpDataChannels:!0},{DtlsSrtpKeyAgreement:!0}]},a.pc_constraints={optional:[{DtlsSrtpKeyAgreement:!0}]},a.checkDataChannelSupport=function(){try{var b=new h(a.SERVER(),a.dataChannelConfig),c=b.createDataChannel("supportCheck",{reliable:!1});return c.close(),!0}catch(d){return!1}},a.dataChannelSupport=a.checkDataChannelSupport(),a.connect=function(b,c){c=c||"",a._socket=new WebSocket(b),a._socket.onopen=function(){a._socket.send(JSON.stringify({eventName:"join_room",data:{room:c}})),a._socket.onmessage=function(b){var c=JSON.parse(b.data);a.fire(c.eventName,c.data)},a._socket.onerror=function(a){console.error("onerror"),console.error(a)},a._socket.onclose=function(){var b=a._socket.id;a.fire("disconnect stream",b),"undefined"!=typeof a.peerConnections[b]&&a.peerConnections[b].close(),delete a.peerConnections[b],delete a.dataChannels[b],delete a.connections[b]},a.on("get_peers",function(b){a.connections=b.connections,a._me=b.you,a.offerSent&&(a.createPeerConnections(),a.addStreams(),a.addDataChannels(),a.sendOffers()),a.fire("connections",a.connections)}),a.on("receive_ice_candidate",function(b){var c=new j(b);a.peerConnections[b.socketId].addIceCandidate(c),a.fire("receive ice candidate",c)}),a.on("new_peer_connected",function(b){var c=b.socketId;a.connections.push(c),delete a.offerSent;for(var d=a.createPeerConnection(c),e=0;e<a.streams.length;e++){var f=a.streams[e];d.addStream(f)}}),a.on("remove_peer_connected",function(b){var c=b.socketId;a.fire("disconnect stream",c),"undefined"!=typeof a.peerConnections[c]&&a.peerConnections[c].close(),delete a.peerConnections[c],delete a.dataChannels[c],delete a.connections[c]}),a.on("receive_offer",function(b){a.receiveOffer(b.socketId,b.sdp),a.fire("receive offer",b)}),a.on("receive_answer",function(b){a.receiveAnswer(b.socketId,b.sdp),a.fire("receive answer",b)}),a.fire("connect")}},a.sendOffers=function(){for(var b=0,c=a.connections.length;c>b;b++){var d=a.connections[b];a.sendOffer(d)}},a.onClose=function(b){a.on("close_stream",function(){a.fire("close_stream",b)})},a.createPeerConnections=function(){for(var b=0;b<a.connections.length;b++)a.createPeerConnection(a.connections[b])},a.createPeerConnection=function(b){var c=a.pc_constraints;a.dataChannelSupport&&(c=a.dataChannelConfig);var d=a.peerConnections[b]=new h(a.SERVER(),c);return d.onicecandidate=function(c){c.candidate&&a._socket.send(JSON.stringify({eventName:"send_ice_candidate",data:{label:c.candidate.sdpMLineIndex,candidate:c.candidate.candidate,socketId:b}})),a.fire("ice candidate",c.candidate)},d.onopen=function(){a.fire("peer connection opened")},d.onaddstream=function(c){a.fire("add remote stream",c.stream,b)},a.dataChannelSupport&&(d.ondatachannel=function(c){a.debug&&console.log("data channel connecting "+b),a.addDataChannel(b,c.channel)}),d},a.sendOffer=function(b){var d=a.peerConnections[b],e={optional:[],mandatory:{MozDontOfferDataChannel:!0}};if(navigator.webkitGetUserMedia)for(var f in e.mandatory)-1!=f.indexOf("Moz")&&delete e.mandatory[f];e=g(e,l),d.createOffer(function(e){e.sdp=c(e.sdp),d.setLocalDescription(e),a._socket.send(JSON.stringify({eventName:"send_offer",data:{socketId:b,sdp:e}}))},null,l)},a.receiveOffer=function(b,c){a.peerConnections[b];a.sendAnswer(b,c)},a.sendAnswer=function(b,c){var d=a.peerConnections[b];d.setRemoteDescription(new k(c)),d.createAnswer(function(c){d.setLocalDescription(c),a._socket.send(JSON.stringify({eventName:"send_answer",data:{socketId:b,sdp:c}}));d.remoteDescription},null,l)},a.receiveAnswer=function(b,c){var d=a.peerConnections[b];d.setRemoteDescription(new k(c))},a.createStream=function(b,c,d){var e;c=c||function(){},d=d||function(){},e={video:!!b.video,audio:!!b.audio},i?(a.numStreams++,i.call(navigator,e,function(b){a.streams.push(b),a.initializedStreams++,c(b),a.initializedStreams===a.numStreams&&a.fire("ready")},function(a){alert("Could not connect stream."),d(a)})):alert("webRTC is not yet supported in this browser.")},a.addStreams=function(){for(var b=0;b<a.streams.length;b++){var c=a.streams[b];for(var d in a.peerConnections)a.peerConnections[d].addStream(c)}},a.attachStream=function(b,c){"string"==typeof c&&(c=document.getElementById(c)),navigator.mozGetUserMedia?(a.debug&&console.log("Attaching media stream"),c.mozSrcObject=b,c.play()):c.src=webkitURL.createObjectURL(b)},a.createDataChannel=function(b,c){if(!a.dataChannelSupport)return alert("webRTC data channel is not yet supported in this browser, or you must turn on experimental flags"),void 0;var d,e;if("string"==typeof b)d=b,e=a.peerConnections[b];else{e=b,d=void 0;for(var f in a.peerConnections)a.peerConnections[f]===e&&(d=f)}if(!d)throw new Error("attempt to createDataChannel with unknown id");if(!(e&&e instanceof h))throw new Error("attempt to createDataChannel without peerConnection");c=c||"fileTransfer"||String(d);var g,i={reliable:!1};try{a.debug&&console.log("createDataChannel "+d),g=e.createDataChannel(c,i)}catch(j){throw a.debug&&console.log("seems that DataChannel is NOT actually supported!"),j}return a.addDataChannel(d,g)},a.addDataChannel=function(b,c){return c._id=b,c.onopen=function(){a.debug&&console.log("data stream open "+b),a.fire("data stream open",c)},c.onclose=function(){delete a.dataChannels[b],delete a.peerConnections[b],delete a.connections[b],a.debug&&console.log("data stream close "+b),a.fire("data stream close",c)},c.onmessage=function(d){a.debug&&console.log("data stream message "+b),a.fire("data stream data",c,d.data)},c.onerror=function(d){a.debug&&console.log("data stream error "+b+": "+d),a.fire("data stream error",c,d)},a.dataChannels[b]=c,c},a.addDataChannels=function(){if(a.dataChannelSupport)for(var b in a.peerConnections)a.createDataChannel(b)},a.on("ready",function(){a.createPeerConnections(),a.addStreams(),a.addDataChannels(),a.sendOffers(),a.offerSent=!0})}.call(this)},{}]},{},[1]);